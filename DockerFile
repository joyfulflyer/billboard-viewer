FROM python:3.8-slim-buster

COPY ./Pipfile /app/Pipfile
COPY ./Pipfile.lock /app/Pipfile.lock

WORKDIR /app

RUN apt-get install pipenv
RUN pipenv install gunicorn
RUN pipenv install

COPY . /app

EXPOSE 8000
EXPOSE 5000

ENTRYPOINT [ "pipenv", "run" ]
CMD [ "gunicorn", "-w", "4", "-b", "0.0.0.0:8000", "application" ]
