FROM python:3.7-slim-buster

COPY ./Pipfile /app/Pipfile
COPY ./Pipfile.lock /app/Pipfile.lock

WORKDIR /app

RUN pip3 install pipenv
RUN pipenv lock --requirements > requirements.txt
RUN pip3 install -r requirements.txt
RUN pip3 install gunicorn

COPY . /app

EXPOSE 8000

CMD [ "gunicorn", "-w", "4", "application" ]
